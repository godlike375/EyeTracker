# EyeTracker
## Общие сведения
#### Данная программа позволяет перемещать лазер за объектом (изначальная цель - глаз во время хирургической операции).
#### Руководство пользователя располагается в корне репозитория.

## Скриншоты:

#### Главное окно программы
![](https://i.ibb.co/KytrkVW/2023-05-18-174338726.png)

### Окно настроек программы
![](https://i.ibb.co/kHtjqHV/2023-05-18-174531257.png)

### Реализованные фунции приложения:
#### Автоматические:
- Сохранение и загрузка всех настроек
- Сохранение и загрузка выделенной области
- Ведение журналов о событиях программы
- Калибровка координатной системы
- Калибровка шумоподавления камеры
- Калибровка лазера
- Обнаружение устройства контроллера лазера
- Обнаружение камеры
- Подтверждения действий пользователя
- Ограничение некорректных последовательностей действий пользователя
- Перезагрузка программы
- Расчёт перемещения лазера в соответствии с координатами объекта на экране
- Подача звукового сигнала при выходе объекта за границы
- Обнаружение и исправление критических ошибок во время работы программы
- Компактное расположение элементов графического интерфейса
- Система подсказок для упрощения использования программы
- Отображение состояния прогресса в режимах калибровки
- Упаковка программы в один файл и отсутствие необходимости установки
- Экономия ресурсов для улучшения качества трекинга и обеспечения работоспособности на слабых процессорах
- Проверка введённых значений настроек программы и подсказки по ожидаемому вводу пользователя

#### Ручные:
- Выделение объекта слежения
- Прерывание процесса калибровки или выделения
- Позиционирование лазера
- Поворот изображения с камеры
- Отражение изображения с камеры
- Настройки производительности программы
- Настройки качества слежения за целью
- Дополнительные кнопки в меню настроек
- Выбор цвета отрисовки линий

## Для разработчиков:

### Установка проекта:

    git clone https://github.com/godlike375/EyeTracker.git
    
    cd EyeTracker
    
    python -m venv /venv
    
    venv_python -m pip install -r requirements.txt
    
    venv_python main.py

### Компиляция приложения под Windows:

    venv_python -m pip install pyinstaller
    venv_python -m pytest tests
    pyinstaller --noconsole --onefile --name eye_tracker --icon assets/tracking.ico --add-data "assets/alert.wav;assets" --add-data "assets/tracking.ico;assets" main.py

#### Если нужно запускать линтер при коммитах, то вставляем себе pre-commmit хук в .git с текстом:

    #!/bin/bash
    
    export PYTHONIOENCODING="utf-8"
    
    VENV_PYTHON="./venv_python.sh"
    
    "$VENV_PYTHON" -m flake8 ./model ./common ./view
    
    if [[ $? -ne 0 ]]; then
    
        exit 1
    
    fi 

### Архитектурные особенности
Программа построена на архитектуре MVVM. В основе лежит python 3.8.
Для отображения графического интерфейса используется tkinter.
> Главный исполняемый файл - ***main.py*** в корне проекта.
***conftest.py*** - файл с предварительными настройками для pytest

#### Структура папок и файлов
В папке ***eye_tracker*** находится весь исходный код программы. 
- В подпапке ***model*** находится файлы модели предметной области. 
- В подпапке ***common*** находится инфраструктурный код,
который непосредствено не относится к предметной области, но используется классами модели.
- В подпапке ***view*** находятся файлы модели представления, которые используются для отображения
информации и создания пользовательского интерфейса.
В папке ***assets*** лежат файлы ресурсов, используемые программой

